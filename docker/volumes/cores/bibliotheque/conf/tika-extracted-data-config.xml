<dataConfig>
    <script>
        <![CDATA[
            id = 1;
            function f_entity(el) {
                el.id = (id++).toFixed();;
                return el;
            }
        ]]>
    </script>
    <dataSource type="FileDataSource" />
    <document>
        <entity name="oeuvres" 
                processor="FileListEntityProcessor"
                baseDir="/opt/solr/server/solr/mycores/bibliotheque/conf/litterature/xml/" 
                fileName=".*\.xml$"
                onError="skip"
                recursive="true"  
                rootEntity="false">
                <!-- field column="fileAbsolutePath" name="id" / -->
                <field column="fileLastModified" name="last_modified" />
                <field column="resourceName" name="file_name" xpath="/html/head/meta[@name='resourceName']/@content" />
                <field column="dc:title" name="title" xpath="/html/head/meta[@name='dc:title']/@content" />
                <!-- field column="Author" name="author" xpath="/html/head/meta[@name='Author']/@content" /-->
                <entity name="documentImport"
                        processor="XPathEntityProcessor"
                        url="${oeuvres.fileAbsolutePath}" 
                        forEach="/html/body/div/p"
                        rootEntity="true" 
                        transformer="script:f_entity">
                        <field column="p" name="p" xpath="/html/body/div/p" />
                        <!-- field column="text" / -->
                        <!-- field column="type" name="type" xpath="/html/head/meta[@name='type']/@content" commonField="true" /-->
                        <!--field column="section" name="section" xpath="/html/body/div/p[@class='section']" commonField="true"/>
                        <field column="chapter" name="chapter" xpath="/html/body/div/p[@class='chapter']" commonField="true"/>
                        <field column="category" name="category" xpath="/html/body/div/p/@category"/-->
                </entity>
        </entity>
    </document>
</dataConfig>
